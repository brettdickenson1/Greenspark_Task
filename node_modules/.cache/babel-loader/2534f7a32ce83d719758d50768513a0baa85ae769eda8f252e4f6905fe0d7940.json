{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  persons: []\n};\nexport const fetchPerson = createAsyncThunk(\"person/fetch\", async thunkAPI => {\n  const response = await fetch(\"https://api.mocki.io/v2/016d11e8/product-widgets\", {\n    method: \"GET\"\n  });\n  const data = response.json();\n  return data;\n});\nexport const PersonSlice = createSlice({\n  name: \"person\",\n  initialState,\n  reducers: {\n    updateWidget: (state, action) => {\n      const index = action.payload.id;\n      return {\n        ...state,\n        persons: state.persons.map((content, i) => index === content.id ? {\n          ...content,\n          selectedColor: action.payload.selectedColor\n        } : content)\n      };\n    },\n    activateBadge: (state, action) => {\n      const person = state.persons.find(content => content.id === action.payload.id);\n      if (person) person.active = !person.active;\n      const person2 = state.persons.find(content => content.id !== action.payload.id);\n      if (person2) person2.active = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchPerson.fulfilled, (state, action) => {\n      state.persons = action.payload;\n    });\n    // builder.addCase(savePerson.fulfilled, (state, action) => {\n    //   state.persons.push(action.payload);\n    // });\n  }\n});\n\nexport default PersonSlice.reducer;\nexport const {\n  updateWidget,\n  activateBadge\n} = PersonSlice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","initialState","persons","fetchPerson","thunkAPI","response","fetch","method","data","json","PersonSlice","name","reducers","updateWidget","state","action","index","payload","id","map","content","i","selectedColor","activateBadge","person","find","active","person2","extraReducers","builder","addCase","fulfilled","reducer","actions"],"sources":["/Users/brettdickenson1/Desktop/WORK/TypeScript/redux-ts/src/store/features/personSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport interface Person {\n  id: number;\n  action: string;\n  active: boolean;\n  amount: number;\n  linked: boolean;\n  selectedColor: string;\n  type: string;\n}\n\ninterface PersonState {\n  persons: Person[];\n}\n\nconst initialState: PersonState = {\n  persons: [],\n};\n\nexport const fetchPerson = createAsyncThunk(\n  \"person/fetch\",\n  async (thunkAPI) => {\n    const response = await fetch(\n      \"https://api.mocki.io/v2/016d11e8/product-widgets\",\n      {\n        method: \"GET\",\n      }\n    );\n    const data = response.json();\n    return data;\n  }\n);\n\nexport const PersonSlice = createSlice({\n  name: \"person\",\n  initialState,\n  reducers: {\n    updateWidget: (\n      state,\n      action: PayloadAction<{ id: number; selectedColor: string }>\n    ) => {\n      const index = action.payload.id;\n      return {\n        ...state,\n        persons: state.persons.map((content, i) =>\n          index === content.id\n            ? { ...content, selectedColor: action.payload.selectedColor }\n            : content\n        ),\n      };\n    },\n    activateBadge: (state, action: PayloadAction<{ id: number }>) => {\n      const person = state.persons.find(\n        (content) => content.id === action.payload.id\n      );\n      if (person) person.active = !person.active;\n\n      const person2 = state.persons.find(\n        (content) => content.id !== action.payload.id\n      );\n      if (person2) person2.active = false;\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(\n      fetchPerson.fulfilled,\n      (state, action: PayloadAction<Person[]>) => {\n        state.persons = action.payload;\n      }\n    );\n    // builder.addCase(savePerson.fulfilled, (state, action) => {\n    //   state.persons.push(action.payload);\n    // });\n  },\n});\n\nexport default PersonSlice.reducer;\nexport const { updateWidget, activateBadge } = PersonSlice.actions;\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAuB,kBAAkB;AAgB/E,MAAMC,YAAyB,GAAG;EAChCC,OAAO,EAAE;AACX,CAAC;AAED,OAAO,MAAMC,WAAW,GAAGJ,gBAAgB,CACzC,cAAc,EACd,MAAOK,QAAQ,IAAK;EAClB,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,kDAAkD,EAClD;IACEC,MAAM,EAAE;EACV,CACF,CAAC;EACD,MAAMC,IAAI,GAAGH,QAAQ,CAACI,IAAI,CAAC,CAAC;EAC5B,OAAOD,IAAI;AACb,CACF,CAAC;AAED,OAAO,MAAME,WAAW,GAAGV,WAAW,CAAC;EACrCW,IAAI,EAAE,QAAQ;EACdV,YAAY;EACZW,QAAQ,EAAE;IACRC,YAAY,EAAEA,CACZC,KAAK,EACLC,MAA4D,KACzD;MACH,MAAMC,KAAK,GAAGD,MAAM,CAACE,OAAO,CAACC,EAAE;MAC/B,OAAO;QACL,GAAGJ,KAAK;QACRZ,OAAO,EAAEY,KAAK,CAACZ,OAAO,CAACiB,GAAG,CAAC,CAACC,OAAO,EAAEC,CAAC,KACpCL,KAAK,KAAKI,OAAO,CAACF,EAAE,GAChB;UAAE,GAAGE,OAAO;UAAEE,aAAa,EAAEP,MAAM,CAACE,OAAO,CAACK;QAAc,CAAC,GAC3DF,OACN;MACF,CAAC;IACH,CAAC;IACDG,aAAa,EAAEA,CAACT,KAAK,EAAEC,MAAqC,KAAK;MAC/D,MAAMS,MAAM,GAAGV,KAAK,CAACZ,OAAO,CAACuB,IAAI,CAC9BL,OAAO,IAAKA,OAAO,CAACF,EAAE,KAAKH,MAAM,CAACE,OAAO,CAACC,EAC7C,CAAC;MACD,IAAIM,MAAM,EAAEA,MAAM,CAACE,MAAM,GAAG,CAACF,MAAM,CAACE,MAAM;MAE1C,MAAMC,OAAO,GAAGb,KAAK,CAACZ,OAAO,CAACuB,IAAI,CAC/BL,OAAO,IAAKA,OAAO,CAACF,EAAE,KAAKH,MAAM,CAACE,OAAO,CAACC,EAC7C,CAAC;MACD,IAAIS,OAAO,EAAEA,OAAO,CAACD,MAAM,GAAG,KAAK;IACrC;EACF,CAAC;EACDE,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CAACC,OAAO,CACb3B,WAAW,CAAC4B,SAAS,EACrB,CAACjB,KAAK,EAAEC,MAA+B,KAAK;MAC1CD,KAAK,CAACZ,OAAO,GAAGa,MAAM,CAACE,OAAO;IAChC,CACF,CAAC;IACD;IACA;IACA;EACF;AACF,CAAC,CAAC;;AAEF,eAAeP,WAAW,CAACsB,OAAO;AAClC,OAAO,MAAM;EAAEnB,YAAY;EAAEU;AAAc,CAAC,GAAGb,WAAW,CAACuB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}