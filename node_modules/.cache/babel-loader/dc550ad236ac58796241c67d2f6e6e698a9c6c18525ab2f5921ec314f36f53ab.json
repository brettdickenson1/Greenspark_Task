{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  loading: false,\n  widgetData: [],\n  boxColors: [{\n    colorID: 1,\n    color: \"#2E3A8C\",\n    setFocus: false\n  }, {\n    colorID: 2,\n    color: \"#3B755F\",\n    setFocus: false\n  }, {\n    colorID: 3,\n    color: \"#F2EBDB\",\n    setFocus: false\n  }, {\n    colorID: 4,\n    color: \"white\",\n    setFocus: false\n  }, {\n    colorID: 5,\n    color: \"black\",\n    setFocus: false\n  }]\n};\nexport const fetchWidgetData = createAsyncThunk(\"widgetData/fetch\", async () => {\n  try {\n    const url = \"https://api.mocki.io/v2/016d11e8/product-widgets\";\n    const response = await axios.get(url);\n    return response.data;\n  } catch (err) {\n    console.log(err);\n    return [];\n  }\n});\nexport const WidgetSlice = createSlice({\n  name: \"widget\",\n  initialState,\n  reducers: {\n    updateWidget: (state, action) => {\n      const index = action.payload.id;\n      const colorIndex = action.payload.colorID;\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) => index === content.id ? {\n          ...content,\n          selectedColor: action.payload.selectedColor,\n          boxColors: state.boxColors.map(item => colorIndex === item.colorID ? {\n            ...item,\n            setFocus: true\n          } : {\n            ...item,\n            setFocus: false\n          })\n        } : index !== content.id ? {\n          ...content,\n          active: false,\n          linked: false,\n          setFocus: false,\n          boxColors: []\n        } : content)\n      };\n    },\n    updateWidgetState: state => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) => content.selectedColor === \"green\" ? {\n          ...content,\n          selectedColor: \"#2E3A8C\",\n          active: false,\n          linked: false\n        } : content.selectedColor === \"black\" ? {\n          ...content,\n          selectedColor: \"#3B755F\",\n          active: false,\n          linked: false\n        } : content.selectedColor === \"blue\" ? {\n          ...content,\n          selectedColor: \"#F2EBDB\",\n          active: false,\n          linked: false,\n          amount: 100\n        } : content)\n      };\n    },\n    activateLinked: (state, action) => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) => action.payload.id === content.id ? {\n          ...content,\n          linked: !content.linked\n        } : action.payload.id !== content.id ? {\n          ...content,\n          linked: false,\n          active: false,\n          boxColors: []\n        } : content)\n      };\n    },\n    activateBadge: (state, action) => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) => action.payload.id === content.id ? {\n          ...content,\n          active: !content.active\n        } : action.payload.id !== content.id ? {\n          ...content,\n          active: false,\n          linked: false,\n          boxColors: []\n        } : content)\n      };\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchWidgetData.pending, state => {\n      state.loading = true;\n    });\n    builder.addCase(fetchWidgetData.fulfilled, (state, action) => {\n      state.loading = false;\n      state.widgetData = action.payload;\n    });\n\n    // builder.addCase(\n    //   fetchUsers.fulfilled,\n    //   (state, action: PayloadAction<Array<User>>) => {\n    //     state.loading = false;\n    //     state.users = action.payload;\n    //   }\n    // );\n    builder.addCase(fetchUsers.rejected, (state, action) => {\n      state.loading = false;\n      state.users = [];\n      state.error = action.error.message;\n    });\n  }\n});\nexport default WidgetSlice.reducer;\nexport const {\n  updateWidget,\n  activateBadge,\n  activateLinked,\n  updateWidgetState\n} = WidgetSlice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","loading","widgetData","boxColors","colorID","color","setFocus","fetchWidgetData","url","response","get","data","err","console","log","WidgetSlice","name","reducers","updateWidget","state","action","index","payload","id","colorIndex","map","content","i","selectedColor","item","active","linked","updateWidgetState","amount","activateLinked","activateBadge","extraReducers","builder","addCase","pending","fulfilled","fetchUsers","rejected","users","error","message","reducer","actions"],"sources":["/Users/brettdickenson1/Desktop/WORK/TypeScript/greenspark-tech-task/src/store/features/widgetSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { WidgetData, WidgetState } from \"../../types/globalTypes\";\nimport axios from \"axios\";\n\nconst initialState: WidgetState = {\n  loading: false,\n  widgetData: [],\n  boxColors: [\n    {\n      colorID: 1,\n      color: \"#2E3A8C\",\n      setFocus: false,\n    },\n    {\n      colorID: 2,\n      color: \"#3B755F\",\n      setFocus: false,\n    },\n    {\n      colorID: 3,\n      color: \"#F2EBDB\",\n      setFocus: false,\n    },\n    {\n      colorID: 4,\n      color: \"white\",\n      setFocus: false,\n    },\n    {\n      colorID: 5,\n      color: \"black\",\n      setFocus: false,\n    },\n  ],\n};\n\nexport const fetchWidgetData = createAsyncThunk(\n  \"widgetData/fetch\",\n  async () => {\n    try {\n      const url = \"https://api.mocki.io/v2/016d11e8/product-widgets\";\n      const response = await axios.get(url);\n      return response.data;\n    } catch (err) {\n      console.log(err);\n      return [];\n    }\n  }\n);\n\nexport const WidgetSlice = createSlice({\n  name: \"widget\",\n  initialState,\n  reducers: {\n    updateWidget: (\n      state,\n      action: PayloadAction<{\n        id: number;\n        selectedColor: string;\n        colorID: number;\n      }>\n    ) => {\n      const index = action.payload.id;\n      const colorIndex = action.payload.colorID;\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) =>\n          index === content.id\n            ? {\n                ...content,\n                selectedColor: action.payload.selectedColor,\n                boxColors: state.boxColors.map((item) =>\n                  colorIndex === item.colorID\n                    ? { ...item, setFocus: true }\n                    : { ...item, setFocus: false }\n                ),\n              }\n            : index !== content.id\n            ? {\n                ...content,\n                active: false,\n                linked: false,\n                setFocus: false,\n                boxColors: [],\n              }\n            : content\n        ),\n      };\n    },\n    updateWidgetState: (state) => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) =>\n          content.selectedColor === \"green\"\n            ? {\n                ...content,\n                selectedColor: \"#2E3A8C\",\n                active: false,\n                linked: false,\n              }\n            : content.selectedColor === \"black\"\n            ? {\n                ...content,\n                selectedColor: \"#3B755F\",\n                active: false,\n                linked: false,\n              }\n            : content.selectedColor === \"blue\"\n            ? {\n                ...content,\n                selectedColor: \"#F2EBDB\",\n                active: false,\n                linked: false,\n                amount: 100,\n              }\n            : content\n        ),\n      };\n    },\n    activateLinked: (state, action: PayloadAction<{ id: number }>) => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) =>\n          action.payload.id === content.id\n            ? { ...content, linked: !content.linked }\n            : action.payload.id !== content.id\n            ? { ...content, linked: false, active: false, boxColors: [] }\n            : content\n        ),\n      };\n    },\n    activateBadge: (state, action: PayloadAction<{ id: number }>) => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) =>\n          action.payload.id === content.id\n            ? { ...content, active: !content.active }\n            : action.payload.id !== content.id\n            ? { ...content, active: false, linked: false, boxColors: [] }\n            : content\n        ),\n      };\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(fetchWidgetData.pending, (state) => {\n      state.loading = true;\n    });\n    builder.addCase(\n      fetchWidgetData.fulfilled,\n      (state, action: PayloadAction<WidgetData[]>) => {\n        state.loading = false;\n        state.widgetData = action.payload;\n      }\n    );\n\n    // builder.addCase(\n    //   fetchUsers.fulfilled,\n    //   (state, action: PayloadAction<Array<User>>) => {\n    //     state.loading = false;\n    //     state.users = action.payload;\n    //   }\n    // );\n    builder.addCase(fetchUsers.rejected, (state, action) => {\n      state.loading = false;\n      state.users = [];\n      state.error = action.error.message;\n    });\n  },\n});\n\nexport default WidgetSlice.reducer;\nexport const {\n  updateWidget,\n  activateBadge,\n  activateLinked,\n  updateWidgetState,\n} = WidgetSlice.actions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}