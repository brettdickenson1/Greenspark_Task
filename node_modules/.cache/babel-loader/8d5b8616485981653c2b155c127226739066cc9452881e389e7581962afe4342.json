{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  widgetData: []\n};\nexport const fetchWidgetData = createAsyncThunk(\"widgetData/fetch\", async () => {\n  const response = await fetch(\"https://api.mocki.io/v2/016d11e8/product-widgets\", {\n    method: \"GET\"\n  });\n  const data = response.json();\n  return data;\n});\nexport const WidgetSlice = createSlice({\n  name: \"widget\",\n  initialState,\n  reducers: {\n    updateWidget: (state, action) => {\n      const index = action.payload.id;\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) => index === content.id ? {\n          ...content,\n          selectedColor: action.payload.selectedColor\n        } : content)\n      };\n    },\n    activateLinked: (state, action) => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) => action.payload.id === content.id ? {\n          ...content,\n          linked: !content.linked\n        } : action.payload.id !== content.id ? {\n          ...content,\n          linked: false\n        } : content)\n      };\n    },\n    activateBadge: (state, action) => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) => action.payload.id === content.id ? {\n          ...content,\n          active: !content.active\n        } : action.payload.id !== content.id ? {\n          ...content,\n          active: false\n        } : content)\n      };\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchWidgetData.fulfilled, (state, action) => {\n      state.widgetData = action.payload;\n    });\n    // builder.addCase(fetchWidgetData.rejected, (state, action) => {\n    //   if (action.payload) {\n    //     state.error = action.payload.errorMessage\n    //   } else {\n    //     state.error = action.error.message\n    //   }\n  }\n});\n\nexport default WidgetSlice.reducer;\nexport const {\n  updateWidget,\n  activateBadge,\n  activateLinked\n} = WidgetSlice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","initialState","widgetData","fetchWidgetData","response","fetch","method","data","json","WidgetSlice","name","reducers","updateWidget","state","action","index","payload","id","map","content","i","selectedColor","activateLinked","linked","activateBadge","active","extraReducers","builder","addCase","fulfilled","reducer","actions"],"sources":["/Users/brettdickenson1/Desktop/WORK/TypeScript/greenspark-tech-task/src/store/features/widgetSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { WidgetData, WidgetState } from \"../../types/globalTypes\";\n\nconst initialState: WidgetState = {\n  widgetData: [],\n};\n\nexport const fetchWidgetData = createAsyncThunk(\n  \"widgetData/fetch\",\n  async () => {\n    const response = await fetch(\n      \"https://api.mocki.io/v2/016d11e8/product-widgets\",\n      {\n        method: \"GET\",\n      }\n    );\n    const data = response.json();\n    return data;\n  }\n);\n\nexport const WidgetSlice = createSlice({\n  name: \"widget\",\n  initialState,\n  reducers: {\n    updateWidget: (\n      state,\n      action: PayloadAction<{ id: number; selectedColor: string }>\n    ) => {\n      const index = action.payload.id;\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) =>\n          index === content.id\n            ? { ...content, selectedColor: action.payload.selectedColor }\n            : content\n        ),\n      };\n    },\n    activateLinked: (\n      state,\n      action: PayloadAction<{ id: number; linked: boolean }>\n    ) => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) =>\n          action.payload.id === content.id\n            ? { ...content, linked: !content.linked }\n            : action.payload.id !== content.id\n            ? { ...content, linked: false }\n            : content\n        ),\n      };\n    },\n    activateBadge: (state, action: PayloadAction<{ id: number }>) => {\n      return {\n        ...state,\n        widgetData: state.widgetData.map((content, i) =>\n          action.payload.id === content.id\n            ? { ...content, active: !content.active }\n            : action.payload.id !== content.id\n            ? { ...content, active: false }\n            : content\n        ),\n      };\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(\n      fetchWidgetData.fulfilled,\n      (state, action: PayloadAction<WidgetData[]>) => {\n        state.widgetData = action.payload;\n      }\n    );\n    // builder.addCase(fetchWidgetData.rejected, (state, action) => {\n    //   if (action.payload) {\n    //     state.error = action.payload.errorMessage\n    //   } else {\n    //     state.error = action.error.message\n    //   }\n  },\n});\n\nexport default WidgetSlice.reducer;\nexport const { updateWidget, activateBadge, activateLinked } =\n  WidgetSlice.actions;\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAuB,kBAAkB;AAG/E,MAAMC,YAAyB,GAAG;EAChCC,UAAU,EAAE;AACd,CAAC;AAED,OAAO,MAAMC,eAAe,GAAGJ,gBAAgB,CAC7C,kBAAkB,EAClB,YAAY;EACV,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAC1B,kDAAkD,EAClD;IACEC,MAAM,EAAE;EACV,CACF,CAAC;EACD,MAAMC,IAAI,GAAGH,QAAQ,CAACI,IAAI,CAAC,CAAC;EAC5B,OAAOD,IAAI;AACb,CACF,CAAC;AAED,OAAO,MAAME,WAAW,GAAGT,WAAW,CAAC;EACrCU,IAAI,EAAE,QAAQ;EACdT,YAAY;EACZU,QAAQ,EAAE;IACRC,YAAY,EAAEA,CACZC,KAAK,EACLC,MAA4D,KACzD;MACH,MAAMC,KAAK,GAAGD,MAAM,CAACE,OAAO,CAACC,EAAE;MAC/B,OAAO;QACL,GAAGJ,KAAK;QACRX,UAAU,EAAEW,KAAK,CAACX,UAAU,CAACgB,GAAG,CAAC,CAACC,OAAO,EAAEC,CAAC,KAC1CL,KAAK,KAAKI,OAAO,CAACF,EAAE,GAChB;UAAE,GAAGE,OAAO;UAAEE,aAAa,EAAEP,MAAM,CAACE,OAAO,CAACK;QAAc,CAAC,GAC3DF,OACN;MACF,CAAC;IACH,CAAC;IACDG,cAAc,EAAEA,CACdT,KAAK,EACLC,MAAsD,KACnD;MACH,OAAO;QACL,GAAGD,KAAK;QACRX,UAAU,EAAEW,KAAK,CAACX,UAAU,CAACgB,GAAG,CAAC,CAACC,OAAO,EAAEC,CAAC,KAC1CN,MAAM,CAACE,OAAO,CAACC,EAAE,KAAKE,OAAO,CAACF,EAAE,GAC5B;UAAE,GAAGE,OAAO;UAAEI,MAAM,EAAE,CAACJ,OAAO,CAACI;QAAO,CAAC,GACvCT,MAAM,CAACE,OAAO,CAACC,EAAE,KAAKE,OAAO,CAACF,EAAE,GAChC;UAAE,GAAGE,OAAO;UAAEI,MAAM,EAAE;QAAM,CAAC,GAC7BJ,OACN;MACF,CAAC;IACH,CAAC;IACDK,aAAa,EAAEA,CAACX,KAAK,EAAEC,MAAqC,KAAK;MAC/D,OAAO;QACL,GAAGD,KAAK;QACRX,UAAU,EAAEW,KAAK,CAACX,UAAU,CAACgB,GAAG,CAAC,CAACC,OAAO,EAAEC,CAAC,KAC1CN,MAAM,CAACE,OAAO,CAACC,EAAE,KAAKE,OAAO,CAACF,EAAE,GAC5B;UAAE,GAAGE,OAAO;UAAEM,MAAM,EAAE,CAACN,OAAO,CAACM;QAAO,CAAC,GACvCX,MAAM,CAACE,OAAO,CAACC,EAAE,KAAKE,OAAO,CAACF,EAAE,GAChC;UAAE,GAAGE,OAAO;UAAEM,MAAM,EAAE;QAAM,CAAC,GAC7BN,OACN;MACF,CAAC;IACH;EACF,CAAC;EACDO,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CAACC,OAAO,CACbzB,eAAe,CAAC0B,SAAS,EACzB,CAAChB,KAAK,EAAEC,MAAmC,KAAK;MAC9CD,KAAK,CAACX,UAAU,GAAGY,MAAM,CAACE,OAAO;IACnC,CACF,CAAC;IACD;IACA;IACA;IACA;IACA;IACA;EACF;AACF,CAAC,CAAC;;AAEF,eAAeP,WAAW,CAACqB,OAAO;AAClC,OAAO,MAAM;EAAElB,YAAY;EAAEY,aAAa;EAAEF;AAAe,CAAC,GAC1Db,WAAW,CAACsB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}